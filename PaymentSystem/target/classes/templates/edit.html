<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit bank</title>
    <script>
        var deleteBankUrl = "";
        var deleteBankBin = "";

        function fill_inputs() {
            let dataSource = document.getElementById("banks");
            let data = dataSource.options[dataSource.selectedIndex].text.split(' ');
            let binBank = document.getElementById("bin");
            binBank.value = data[0];
            deleteBankBin = data[0];
            let urlBank = document.getElementById("url");
            urlBank.value = data[2];
            deleteBankUrl = data[2];
        }

        function sendForm() {
            let xhr = new XMLHttpRequest();
            xhr.open('POST', '/edit', true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onload = function () {

            };
            let newBin = document.getElementById("bin").value;
            let newUrl = document.getElementById("url").value;
            let data = JSON.stringify({
                "delBin": deleteBankBin,
                "delUrl": deleteBankUrl,
                "newBin": newBin,
                "newUrl": newUrl
            });
            xhr.send(data);
        }

    </script>
</head>
<body>
<form th:object="${bankToDel}">
    <label for="banks">Existing banks:</label>
    <select id="banks" onchange="fill_inputs()">
        <option selected disabled hidden>Choose row to edit</option>
        <option th:each="bankEntry : ${allBanks}"
                th:value="${bankEntry}"
                th:text="${bankEntry.toCompactString()}"></option>
    </select>
    <input type="submit" value="Select"/>
</form>
<br>
<label for="bin">BIN:</label><br>
<input id="bin" type="text"/><br>
<label for="url">BankURL:</label><br>
<input id="url" type="text"/><br>
<button id="btnSend" onclick="sendForm()">Send</button>
<br>
<label id="status"></label>>
<br>
</body>
</html>